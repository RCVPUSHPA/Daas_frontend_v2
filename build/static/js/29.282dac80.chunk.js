"use strict";(self.webpackChunkdass=self.webpackChunkdass||[]).push([[29],{9376:()=>{},29:(e,t,o)=>{o.r(t),o.d(t,{default:()=>N});var a=o(2483),s=o(2189),l=o(4721),n=(o(9376),o(3376));const r=a.forwardRef((function(e,t){let{title:o,titleId:s,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),o?a.createElement("title",{id:s},o):null,a.createElement("path",{d:"M5.25 6.375a4.125 4.125 0 1 1 8.25 0 4.125 4.125 0 0 1-8.25 0ZM2.25 19.125a7.125 7.125 0 0 1 14.25 0v.003l-.001.119a.75.75 0 0 1-.363.63 13.067 13.067 0 0 1-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 0 1-.364-.63l-.001-.122ZM18.75 7.5a.75.75 0 0 0-1.5 0v2.25H15a.75.75 0 0 0 0 1.5h2.25v2.25a.75.75 0 0 0 1.5 0v-2.25H21a.75.75 0 0 0 0-1.5h-2.25V7.5Z"}))}));var i=o(6723);const c=function(e){return e.showPopup&&(0,i.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 ",children:(0,i.jsxs)("div",{className:"bg-white p-6 rounded shadow-lg w-1/4",children:[(0,i.jsx)("h2",{className:"text-xl mb-4",children:"Select User"}),(0,i.jsx)("input",{type:"text",placeholder:"Search...",value:e.searchTerm,onChange:e.handleSearch,className:"w-full p-2 border rounded"}),0===e.filteredData.length?(0,i.jsx)("div",{className:"text-center text-gray-600 mt-4",children:"No users found"}):(0,i.jsx)("ul",{className:"mt-4 text-left h-[300px] overflow-y-auto overflow-x-hidden",children:e.filteredData.map((t=>(0,i.jsxs)("span",{className:"flex w-full justify-between items-center border-b-2 p-2 mx-2",children:[(0,i.jsx)("li",{className:"py-1 m-1 cursor-default text-base",children:t.username},t),(0,i.jsx)(r,{className:"h-6 w-6 text-gray-400 cursor-pointer mx-3",onClick:()=>e.entitleUser(t.username)})]})))}),(0,i.jsx)("button",{onClick:()=>e.setShowPopup(!1),className:"mt-4 p-2 bg-indigo-500 text-white rounded",children:"Close"})]})})};var d=o(4100),p=o(2260),m=o(5543);const h=a.forwardRef((function(e,t){let{title:o,titleId:s,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),o?a.createElement("title",{id:s},o):null,a.createElement("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"}))}));const u=a.forwardRef((function(e,t){let{title:o,titleId:s,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),o?a.createElement("title",{id:s},o):null,a.createElement("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-8.4 8.4a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32l8.4-8.4Z"}),a.createElement("path",{d:"M5.25 5.25a3 3 0 0 0-3 3v10.5a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3V13.5a.75.75 0 0 0-1.5 0v5.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5V8.25a1.5 1.5 0 0 1 1.5-1.5h5.25a.75.75 0 0 0 0-1.5H5.25Z"}))}));var g=o(9619),_=o(5289),x=o(7663),f=(o(6499),o(976)),b=o(4940),v=o(2499),y=o(2696);function w(e){const t=(0,a.useRef)(null),[o,n]=(0,a.useState)({...e.machine}),[r,c]=(0,a.useState)({}),[p,m]=(0,a.useState)(!1),[h,u]=(0,a.useState)(!1),g=(0,a.useContext)(s._),w=e.poolId;let j=g.tokenParsed.preferred_username;const N=g.token;(0,a.useEffect)((()=>{l.A.get("".concat("http://172.16.0.108:8000","/v1/pool/").concat(w),{headers:{Authorization:"Bearer ".concat(N)}}).then((e=>{c(e.data.pool)})).catch((e=>{console.log(e)}))}),[]),(0,a.useEffect)((()=>{n({...e.machine})}),[e.machine]);const C=e=>{const{name:t,value:o,type:a,checked:s}=e.target;let l=o;"checkbox"===a?l=s:["guacd_port","max_connections","max_connections_per_user","gateway_port","width","height","dpi","sftp_port","sftp_server_alive_interval","scrollback","font_size","destination_port","port"].includes(t)&&(l=o?parseInt(o,10):null),n((e=>({...e,[t]:l})))};return(0,i.jsx)(_.e.Root,{show:e.open,as:a.Fragment,children:(0,i.jsxs)(x.l,{as:"div",className:"relative z-50",initialFocus:t,onClose:e.setOpen,children:[(0,i.jsx)(_.e.Child,{as:a.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,i.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),(0,i.jsx)("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:(0,i.jsx)("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:(0,i.jsx)(_.e.Child,{as:a.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,i.jsxs)(x.l.Panel,{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg w-auto divide-y divide-slate-400",children:[(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsx)("table",{className:"w-full",children:(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"pl-4",children:(0,i.jsx)("label",{htmlFor:"name",className:"mb-2 text-sm font-medium leading-6 text-gray-900",children:"Name"})}),(0,i.jsx)("td",{className:"pr-4",children:(0,i.jsx)("div",{className:"mt-2 border-0",children:(0,i.jsx)("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md",children:(0,i.jsx)("input",{type:"text",id:"name",name:"name",value:o.name,onChange:C,placeholder:"Name",className:"block flex-1 rounded-md  bg-white  border-slate-300 py-1.5 pl-1 text-gray-700 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6 border-2"})})})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"pl-4",children:(0,i.jsx)("label",{htmlFor:"ip",className:"mb-2 text-sm font-medium leading-6 text-gray-900",children:"Hostname/IP"})}),(0,i.jsx)("td",{className:"pr-4",children:(0,i.jsx)("div",{className:"mt-2 border-0",children:(0,i.jsx)("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md",children:(0,i.jsx)("input",{type:"text",id:"ip",name:"hostname",value:o.hostname,onChange:C,placeholder:"Hostname / IP",className:"block flex-1 rounded-md bg-white bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6 border-2"})})})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"pl-4",children:(0,i.jsx)("label",{htmlFor:"protocol",className:"mb-2 text-sm font-medium leading-6 text-gray-900",children:"Protocol"})}),(0,i.jsx)("td",{className:"pr-4 w-2/3",children:(0,i.jsx)("div",{className:"mt-1",children:(0,i.jsx)("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-indigo-600",children:(0,i.jsx)("input",{id:"protocol",name:"protocol",onChange:C,value:o.protocol,placeholder:"Protocol",className:"block flex-1 rounded-md bg-blue-100 py-1.5 pl-3 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm border border-gray-300 focus:border-indigo-500"})})})})]}),(0,i.jsx)("tr",{children:(0,i.jsxs)("td",{className:"pl-4 col-span-2",children:[(0,i.jsx)("input",{type:"checkbox",className:"mr-2",name:"is_custom_machine",checked:o.is_custom_machine,onChange:C}),(0,i.jsx)("label",{htmlFor:"custom settings",className:"mb-2 text-sm font-medium leading-6 text-gray-900",children:"Custom Settings"})]})})]})}),"RDP"==o.protocol&&o.is_custom_machine&&(0,i.jsx)(f.A,{securityMode:["None","Any","NLA","RDP encryption","TLS encryption","Hyper-V / VMConnect"],poolDetails:o,onChange:C}),"SSH"==o.protocol&&o.is_custom_machine&&(0,i.jsx)(b.A,{poolDetails:o,onChange:C}),"VNC"==o.protocol&&o.is_custom_machine&&(0,i.jsx)(v.A,{poolDetails:o,onChange:C})]}),(0,i.jsxs)("div",{className:"bg-gray-100 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[(0,i.jsxs)("button",{onClick:()=>{u(!0);const t=o.is_custom_machine?o:{...o,poolDetails:{port:r.pool_port||null,protocol:r.pool_protocol||"",users_assigned:r.pool_users_assigned||[],guacd_port:r.pool_guacd_port||null,guacd_encryption:r.pool_guacd_encryption||"",guacd_hostname:r.pool_guacd_hostname||"",weight:r.pool_weight||null,failover_only:r.pool_failover_only||!1,type:r.pool_type||"",entitled:r.pool_entitled||null,machines:r.pool_machines||[],username:r.pool_username||"",password:r.pool_password||"",security:r.pool_security||"",domain:r.pool_domain||"",disable_auth:r.pool_disable_auth||!1,ignore_cert:r.pool_ignore_cert||!1,max_connections:r.pool_max_connections||null,max_connections_per_user:r.pool_max_connections_per_user||null,gateway_port:r.pool_gateway_port||null,gateway_username:r.pool_gateway_username||"",gateway_password:r.pool_gateway_password||"",gateway_domain:r.pool_gateway_domain||"",initial_program:r.pool_initial_program||"",client_name:r.pool_client_name||"",timezone:r.pool_timezone||"",console:r.pool_console||!1,width:r.pool_width||null,height:r.pool_height||null,dpi:r.pool_dpi||null,color_depth:r.pool_color_depth||"",resize_method:r.pool_resize_method||"",read_only:r.pool_read_only||!1,clipboard_encoding:r.pool_clipboard_encoding||"",disable_copy:r.pool_disable_copy||!1,disable_paste:r.pool_disable_paste||!1,console_audio:r.pool_console_audio||!1,custom_disable_audio:r.pool_custom_disable_audio||!1,enable_audio_input:r.pool_enable_audio_input||!1,enable_printing:r.pool_enable_printing||!1,printer_name:r.pool_printer_name||"",enable_drive:r.pool_enable_drive||!1,drive_name:r.pool_drive_name||"",drive_path:r.pool_drive_path||"",cursor:r.pool_cursor||"",enable_wallpaper:r.pool_enable_wallpaper||!1,enable_theming:r.pool_enable_theming||!1,enable_font_smoothing:r.pool_enable_font_smoothing||!1,enable_full_window_drag:r.pool_enable_full_window_drag||!1,enable_desktop_composition:r.pool_enable_desktop_composition||!1,enable_menu_animations:r.pool_enable_menu_animations||!1,disable_bitmap_caching:r.pool_disable_bitmap_caching||!1,disable_offscreen_caching:r.pool_disable_offscreen_caching||!1,disable_glyph_caching:r.pool_disable_glyph_caching||!1,load_balance_info:r.pool_load_balance_info||"",recording_path:r.pool_recording_path||"",recording_name:r.pool_recording_name||"",create_recording_path:r.pool_create_recording_path||!1,recording_exclude_mouse:r.pool_recording_exclude_mouse||!1,recording_include_keys:r.pool_recording_include_keys||!1,exclude_touch_events:r.pool_exclude_touch_events||!1,enable_sftp:r.pool_enable_sftp||!1,sftp_port:r.pool_sftp_port||null,sftp_username:r.pool_sftp_username||"",font_name:r.pool_font_name||"",sftp_password:r.pool_sftp_password||"",sftp_host_key:r.pool_sftp_host_key||"",sftp_private_key:r.pool_sftp_private_key||"",sftp_passphrase:r.pool_sftp_passphrase||"",sftp_root_directory:r.pool_sftp_root_directory||"",sftp_directory:r.pool_sftp_directory||"",sftp_server_alive_interval:r.pool_sftp_server_alive_interval||null,private_key:r.pool_private_key||"",passphrase:r.pool_passphrase||"",color_scheme:r.pool_color_scheme||"",custom_font_name:r.pool_custom_font_name||"",scrollback:r.pool_scrollback||0,font_size:r.pool_font_size||null,backspace:r.pool_backspace||"",terminal_type:r.pool_terminal_type||"",typescript_path:r.pool_typescript_path||"",typescript_name:r.pool_typescript_name||"",create_typescript_path:r.pool_create_typescript_path||!1,swap_red_blue:r.pool_swap_red_blue||!1,destination_host:r.pool_destination_host||"",destination_port:r.pool_destination_port||null,exclude_mouse:r.pool_exclude_mouse||!1,exclude_graphics_streams:r.pool_exclude_graphics_streams||!1,enable_audio:r.pool_enable_audio||!1,audio_servername:r.pool_audio_servername||"",args:r.pool_args||[]}};console.log(t,"editmachines payload");const a={...t,email:j};l.A.put("".concat("http://172.16.0.108:8000","/v1/update_machine/").concat(o.identifier),a,{headers:{Authorization:"Bearer ".concat(N)}}).then((t=>{d.oR.success(t.data.msg,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light",transition:d.q7}),e.setVmAvailable(t.data.machines),e.setOpen(!1)})).catch((e=>{console.error("Failed to update machine:",e),d.oR.error("Failed to update machine",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light",transition:d.q7})})).finally((()=>{u(!1)}))},type:"submit",disabled:h,className:"rounded-md px-3 py-2 text-sm font-semibold text-white shadow-sm flex items-center gap-2\n                    ".concat(h?"bg-indigo-400 cursor-not-allowed":"bg-indigo-500 hover:bg-indigo-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600","\n                  "),children:[h&&(0,i.jsx)(y.A,{className:"h-4 w-4 animate-spin"}),(0,i.jsx)("span",{children:h?"Submitting...":"Confirm"})]}),(0,i.jsx)("button",{type:"button",className:"inline-flex w-full justify-center rounded-md bg-white hover:bg-slate-200 px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",onClick:()=>e.setOpen(!1),ref:t,children:"Cancel"})]})]})})})})]})})}var j=o(792);const N=e=>{const[t,o]=(0,a.useState)(!1),[r,_]=(0,a.useState)(!1),[x,f]=(0,a.useState)(!0),[b,v]=(0,a.useState)(!1);(0,n.zy)();let[N,C]=(0,a.useState)({});const[k,A]=(0,a.useState)(null),[P,S]=(0,a.useState)(null);let[E,O]=(0,a.useState)((0,n.g)().id);const B=e.token;e.tokenParsed.preferred_username;(0,a.useEffect)((()=>{o(!0),l.A.get("".concat("http://172.16.0.108:8000","/v1/pool/").concat(E),{headers:{Authorization:"Bearer ".concat(B)}}).then((e=>{C(e.data.pool)})).catch((e=>{console.log(e)}))}),[]);const R=(0,n.Zp)(),z=(0,a.useContext)(s._);let[H,F]=(0,a.useState)([]),[D,I]=(0,a.useState)([]),[q,M]=(0,a.useState)([]),[U,V]=(0,a.useState)(),[Z,T]=(0,a.useState)();const[L,G]=(0,a.useState)(!1),[J,K]=(0,a.useState)(!1),[Q,W]=(0,a.useState)(!1),[X,Y]=(0,a.useState)(),[$,ee]=(0,a.useState)(""),[te,oe]=(0,a.useState)(q);(0,a.useEffect)((()=>{(async()=>{if(N.id){f(!0);try{const e=await l.A.get("".concat("http://172.16.0.108:8000","/v1/pool/machines/").concat(N.id),{headers:{Authorization:"Bearer ".concat(B)}});Array.isArray(e.data)?F(e.data):F([])}catch(e){console.error("Error fetching VMs:",e),F([])}finally{f(!1)}}})()}),[N.id]);let[ae,se]=(0,a.useState)();(0,a.useEffect)((()=>{l.A.get("".concat("http://172.16.0.108:8000","/v1/guacamole/list_users"),{headers:{Authorization:"Bearer ".concat(B)}}).then((e=>{const t=e.data.data.filter((e=>!D.includes(e.username)));M(t),oe(t)})).catch((e=>{M([]),oe([])}))}),[D]);(0,a.useRef)(null);return(0,i.jsxs)("div",{className:"show-pools flex justify-start items-start gap-2 w-[95%]  min-h-[90vh] m-auto rounded-md bg-white manage_pool",children:[(0,i.jsx)("div",{className:"flex justify-start ml-16 mt-5",children:(0,i.jsx)("div",{onClick:()=>{R("/pools")},className:"ml-4 bg-indigo-500 text-white px-4 py-2 rounded-md hover:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-10",children:(0,i.jsx)("i",{className:"fas fa-arrow-left"})})}),(0,i.jsxs)("div",{className:"m-10 mt-20 p-3 pb-0 shadow-inner border-2 border-gray-200 w-2/4 h-5/6 bg-white",children:[(0,i.jsxs)("div",{className:"flex justify-between mb-3 items-center",children:[(0,i.jsxs)("h2",{className:"font-bold leading-7 text-gray-600 uppercase",children:[(0,i.jsx)("span",{className:"text-indigo-700",children:"Pool Name : "}),N.pool_name]}),(0,i.jsxs)("div",{className:"flex gap-2 justify-evenly items-center",children:[(0,i.jsx)("button",{className:"bg-indigo-500 hover:bg-indigo-600 hover:text-gray-300 text-white rounded-md px-3 py-2 text-sm font-medium flex flex-col gap-2",onClick:()=>{R("/pools/edit-pool/".concat(N.id))},children:"Edit"}),(0,i.jsx)(p.A,{open:J,setOpen:K,poolId:E,vmAvailable:H,setVmAvailable:F,selectedPoolDetails:N,onSuccess:async()=>{if(N.id)try{const e=await l.A.get("".concat("http://172.16.0.108:8000","/v1/pool/machines/").concat(N.id),{headers:{Authorization:"Bearer ".concat(B)}});Array.isArray(e.data)&&F(e.data)}catch(e){console.error("Error refreshing machines:",e)}}}),(0,i.jsx)(w,{open:Q,setOpen:W,poolId:E,vmAvailable:H,setVmAvailable:F,machine:ae}),(0,i.jsxs)("div",{className:"bg-indigo-500 hover:bg-indigo-600 hover:text-gray-300 text-white rounded-md px-3 py-2 text-sm font-medium flex gap-1",children:[(0,i.jsx)(h,{className:"h-5 w-5"}),(0,i.jsx)("button",{type:"button",id:"options-menu","aria-expanded":"true","aria-haspopup":"true",onClick:()=>K(!e.isOpen),children:"Add Machine"})]}),(0,i.jsx)("button",{className:"bg-indigo-500 hover:bg-indigo-600 hover:text-gray-300 text-white rounded-md px-3 py-2 text-sm font-medium flex flex-col gap-2",onClick:()=>{void 0!=U?G(!0):(G(!1),d.oR.error("Select any machine to entitle",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light",transition:d.q7}))},children:"Entitle"}),(0,i.jsx)("button",{className:"bg-indigo-500 hover:bg-indigo-600 hover:text-gray-300 text-white rounded-md px-3 py-2 text-sm font-medium flex flex-col gap-2",children:"Restart"}),(0,i.jsxs)("button",{className:"bg-red-500 hover:bg-red-600 text-white rounded-md px-3 py-2 text-sm font-medium flex  items-center gap-2\n               ".concat(b?"cursor-not-allowed opacity-75":"","\n                     "),onClick:()=>{var t;v(!0);let a=(null===(t=e.tokenParsed)||void 0===t?void 0:t.preferred_username)||"Unknown User";console.log("userEmail--------------",a),l.A.request({method:"DELETE",url:"".concat("http://172.16.0.108:8000","/v1/delete_pool/").concat(N.id),data:{email:a},headers:{Authorization:"Bearer ".concat(B),"Content-Type":"application/json"}}).then((e=>{console.log(e),200==e.status?(z.setAvailablePools(e.data.pools),d.oR.success("Pool deleted successfully",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light",transition:d.q7}),R("/pools"),0==e.data.available_pools.length&&z.setIsPoolAvailable(!1)):(o(!1),d.oR.error("Failed to delete machine",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light",transition:d.q7}))})).catch((e=>{o(!1),console.error("Error deleting pool:",e)})).finally((()=>{v(!1)}))},type:"delete",disabled:b,children:[b&&(0,i.jsx)(y.A,{className:"h-4 w-4 animate-spin"}),(0,i.jsx)("span",{children:b?"Deleting...":"Delete"})]})]})]}),x?(0,i.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,i.jsx)("img",{src:m,className:"App-logo animate-spin",alt:"loading"})}):H.length>0?(0,i.jsx)("div",{className:"overflow-y-auto",children:(0,i.jsxs)("table",{className:"bg-white table-auto w-full",children:[(0,i.jsx)("thead",{className:"divide-y-2",children:(0,i.jsx)("tr",{className:"rounded-md",children:["Name","Protocol","IP/Host","Port","Custom Settings"].map(((e,t)=>(0,i.jsx)("th",{className:"p-3 pl-7 border-gray-300 text-left text-sm uppercase font-bold text-gray-600",children:e},t)))})}),(0,i.jsx)("tbody",{className:"text-gray-500 text-sm",children:H.sort(((e,t)=>{const o=e.name||"",a=t.name||"";return o.localeCompare(a)})).map((t=>(0,i.jsxs)("tr",{className:"text-left border-b-2 cursor-pointer ".concat(U===t.id?"bg-gray-200":"hover:bg-gray-200 hover:text-black"),onClick:()=>((e,t)=>{if(U===t)return V(null),T(null),void I([]);_(!0),V(t),T(e),l.A.get("".concat("http://172.16.0.108:8000","/v1/machine/users/").concat(t),{headers:{Authorization:"Bearer ".concat(B)}}).then((e=>{const t=e.data||[];I(t)})).catch((e=>{console.error("Error:",e)})).finally((()=>{_(!1)}))})(t.identifier,t.id),children:[(0,i.jsx)("td",{className:"p-3",children:t.name}),(0,i.jsx)("td",{className:"p-3",children:t.protocol}),(0,i.jsx)("td",{className:"p-3",children:t.hostname}),(0,i.jsx)("td",{className:"p-3",children:t.port}),(0,i.jsx)("td",{className:"p-3 text-center cursor-pointer   transition duration-150 ease-in-out rounded-md",onClick:e=>e.stopPropagation(),children:t.is_custom_machine?(0,i.jsx)("i",{className:"fa-regular fa-circle-check text-indigo-500 text-lg"}):(0,i.jsx)("i",{className:"fa-regular fa-circle-xmark text-red-500 text-lg"})}),(0,i.jsx)("td",{className:"p-3",onClick:e=>e.stopPropagation(),children:(0,i.jsx)(u,{className:"h-5 w-5 text-indigo-500 cursor-pointer hover:text-indigo-700",onClick:()=>{se(t),W(!0)}})}),(0,i.jsx)("td",{className:"p-3",onClick:e=>e.stopPropagation(),children:k===t.identifier?(0,i.jsx)(j.A,{size:20,style:{color:"red"}}):(0,i.jsx)(g.A,{className:"h-5 w-5 text-red-500 cursor-pointer",onClick:()=>{(t=>{var a;A(t);let s=(null===(a=e.tokenParsed)||void 0===a?void 0:a.preferred_username)||"Unknown User";console.log("Deleting machine with ID:",t),console.log("User Email:",s),l.A.request({method:"DELETE",url:"".concat("http://172.16.0.108:8000","/v1/delete_machine/").concat(t),data:{email:s},headers:{Authorization:"Bearer ".concat(B),"Content-Type":"application/json"}}).then((e=>{F([...e.data.machines]||[]),d.oR.success(e.data.msg,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light",transition:d.q7})})).catch((e=>{o(!1),console.error("Error deleting machine:",e),d.oR.error("Failed to delete machine",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light",transition:d.q7})})).finally((()=>{A(null)}))})(t.identifier)}})})]},t.identifier)))})]})}):(0,i.jsx)("div",{className:"h-full w-full flex justify-center items-center",children:"No machines available"})]}),U&&(0,i.jsxs)("div",{className:"m-10 mt-20 p-3 pb-0 shadow-inner border-2 border-gray-200  w-1/4 text-left h-5/6 overflow-y-auto flex flex-col gap-2 bg-white ",children:[(0,i.jsx)("div",{className:"flex justify-between mb-3 items-center ",children:(0,i.jsx)("h2",{className:"font-semibold leading-7 text-gray-600",children:"Assigned Users"})}),r&&(0,i.jsx)("center",{children:(0,i.jsx)("img",{src:m,className:"App-logo animate-spin",alt:"loading"})}),!r&&D.length>0?D.sort().map((e=>(0,i.jsxs)("div",{className:"flex w-full justify-between border-b-2",children:[(0,i.jsx)("p",{className:"m-1 cursor-default",children:e},e),P===e?(0,i.jsx)(j.A,{size:20,style:{color:"red"}}):(0,i.jsx)(g.A,{className:"h-5 w-5 cursor-pointer text-red-500",onClick:()=>{return S(t=e),void l.A.delete("".concat("http://172.16.0.108:8000","/v1/delete_user_from_machine/").concat(Z,"/").concat(t),{headers:{Authorization:"Bearer ".concat(B)}}).then((e=>{e.data&&e.data.users_assigned&&(I([...e.data.users_assigned]),d.oR.success(e.data.msg,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light",transition:d.q7})),z.setAvailablePools(e.data.pools)})).catch((e=>{console.error("Error deleting user:",e),d.oR.error("Failed",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light",transition:d.q7})})).finally((()=>{S(null)}));var t}})]}))):!r&&(0,i.jsx)("p",{children:"No Users Assigned"})]}),(0,i.jsx)(c,{showPopup:L,setShowPopup:G,selectedVm:U,poolId:N.id,assignedUsers:D,setAssignedUsers:I,entitleUser:e=>{_(!0),l.A.put("".concat("http://172.16.0.108:8000","/v1/add_user_to_machine/").concat(Z,"/").concat(e),{},{headers:{Authorization:"Bearer ".concat(B)}}).then((e=>{e.data&&e.data.users_assigned&&(I([...e.data.users_assigned]),d.oR.success(e.data.msg,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light",transition:d.q7})),z.setAvailablePools(e.data.pools),console.log(e.data.pools)})).catch((e=>{console.error("Error entitling user:",e),d.oR.error("Failed",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light",transition:d.q7})})).finally((()=>{_(!1)}))},handleSearch:e=>{try{const t=e.target.value.toLowerCase(),o=q.filter((e=>e.username.toLowerCase().includes(t)));oe(o),ee(t)}catch(t){oe([])}},searchTerm:$,filteredData:te})]})}},9619:(e,t,o)=>{o.d(t,{A:()=>s});var a=o(2483);const s=a.forwardRef((function(e,t){let{title:o,titleId:s,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),o?a.createElement("title",{id:s},o):null,a.createElement("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z",clipRule:"evenodd"}))}))}}]);
//# sourceMappingURL=29.282dac80.chunk.js.map