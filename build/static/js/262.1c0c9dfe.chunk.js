"use strict";(self.webpackChunkdass=self.webpackChunkdass||[]).push([[262],{262:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var s=a(2483),l=a(4100),n=a(4721);const i=s.forwardRef((function(e,t){let{title:a,titleId:l,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},n),a?s.createElement("title",{id:l},a):null,s.createElement("path",{fillRule:"evenodd",d:"M1.5 6a2.25 2.25 0 0 1 2.25-2.25h16.5A2.25 2.25 0 0 1 22.5 6v12a2.25 2.25 0 0 1-2.25 2.25H3.75A2.25 2.25 0 0 1 1.5 18V6ZM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0 0 21 18v-1.94l-2.69-2.689a1.5 1.5 0 0 0-2.12 0l-.88.879.97.97a.75.75 0 1 1-1.06 1.06l-5.16-5.159a1.5 1.5 0 0 0-2.12 0L3 16.061Zm10.125-7.81a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Z",clipRule:"evenodd"}))}));var r=a(7346),o=a(2189),c=a(792),d=a(6723);const m=e=>{let{tokenParsed:t}=e;const a=(new Date).toLocaleString(),m=t.name,[h,x]=(0,s.useState)(!1),[p,g]=(0,s.useState)(null),[u,j]=(0,s.useState)(""),[f,y]=(0,s.useState)([]),[b,w]=(0,s.useState)(""),[v,N]=(0,s.useState)(!1),R=(0,s.useContext)(o._).token;return(0,d.jsxs)("div",{className:"report-template w-[95%] mx-auto mb-5 min-h-[90vh] rounded-md bg-white flex justify-around items-stretch items-center",children:[(0,d.jsxs)("div",{className:"space-y-5 m-2 flex-1 template_class w-2/3 ml-10 mt-12",children:[(0,d.jsx)(r.A,{open:h,setOpen:x,heading:"Please confirm",text:"Are you sure you want to submit?",color:"yellow"}),(0,d.jsxs)("div",{className:"bg-white p-3 shadow-md text-indigo-600 rounded-lg shadow-lg border flex-1 pdf_template w-5/6 h-5/6 m-10",children:[(0,d.jsx)("h2",{className:"font-bold leading-7",children:"PDF Template"}),(0,d.jsxs)("div",{className:"text-left table-auto mt-5 space-y-4",children:[(0,d.jsxs)("div",{className:"tr flex items-center gap-x-4",children:[(0,d.jsx)("div",{className:"th w-1/3",children:(0,d.jsx)("label",{htmlFor:"report",className:"block text-sm font-medium leading-6 text-gray-900",children:"Report"})}),(0,d.jsx)("div",{className:"td w-2/3",children:(0,d.jsxs)("select",{name:"report",onChange:async e=>{const t=e.target.value;j(t);try{const e=await n.A.get("".concat("http://172.16.0.108:8000","/v1/guacamole/reports/").concat(t),{headers:{Authorization:"Bearer ".concat(R)}});y(e.data),e.data.length>0?(g(e.data[0].company_logo),w(e.data[0].company_name)):(g(null),w(""))}catch(a){console.error("Error fetching reports:",a),l.oR.error("Failed to fetch reports")}},className:"w-full cursor-pointer rounded-md py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[(0,d.jsx)("option",{value:"",children:"Select Report"}),(0,d.jsx)("option",{value:"Session Reports",children:"Session Reports"}),(0,d.jsx)("option",{value:"Daily Reports",children:"Daily Reports"}),(0,d.jsx)("option",{value:"Consolidate Reports",children:"Consolidate Reports"})]})})]}),(0,d.jsxs)("div",{className:"tr flex items-center gap-x-4",children:[(0,d.jsx)("div",{className:"th w-1/3",children:(0,d.jsx)("label",{htmlFor:"companyName",className:"block text-sm font-medium leading-6 text-gray-900",children:"Company Name"})}),(0,d.jsx)("div",{className:"td w-2/3",children:(0,d.jsx)("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset bg-white ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600",children:(0,d.jsx)("input",{type:"text",name:"companyName",list:"company-names",value:b,onChange:e=>{const t=e.target.value;w(t)},className:"block w-full bg-transparent py-1.5 pl-2 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6 rounded-md"})})})]}),(0,d.jsxs)("div",{className:"tr flex items-start gap-x-4",children:[(0,d.jsx)("div",{className:"th w-1/3",children:(0,d.jsx)("label",{htmlFor:"photo",className:"block text-sm font-medium leading-6 text-gray-900",children:"Company logo"})}),(0,d.jsx)("div",{className:"td w-2/3",children:p?(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("div",{className:"img rounded-md bg-white px-2.5 py-1.5 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 border-2 background_image",children:(0,d.jsx)("img",{className:"img max-h-32 object-contain",src:"string"===typeof p?"data:image/png;base64,".concat(p):URL.createObjectURL(p),alt:"Company logo"})}),(0,d.jsx)("button",{type:"button",className:"rounded-md bg-white px-2.5 py-1.5 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 border-2",onClick:()=>g(null),children:"Remove"})]}):(0,d.jsx)("div",{className:"flex justify-center rounded-lg border-dashed border-gray-900/25 px-6 py-10 border-2 bg-white",children:(0,d.jsxs)("div",{className:"text-center flex flex-col justify-center items-center",children:[(0,d.jsx)(i,{className:"mx-auto h-12 w-12 text-gray-300","aria-hidden":"true"}),(0,d.jsx)("div",{className:"flex text-sm leading-6 text-gray-600",children:(0,d.jsxs)("label",{htmlFor:"file-upload",className:"relative cursor-pointer rounded-md font-semibold text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-600 focus-within:ring-offset-2 hover:text-indigo-500",children:[(0,d.jsx)("span",{children:"Upload a file"}),(0,d.jsx)("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onloadend=()=>{const t=e.result.split(",")[1];g(t)},e.readAsDataURL(t)}}})]})}),(0,d.jsx)("p",{className:"text-xs leading-5 text-gray-600",children:"PNG, JPG, JPEG up to 10MB"})]})})})]})]})]}),(0,d.jsx)("div",{className:"pl-5 text-left",children:(0,d.jsx)("button",{type:"button",onClick:async()=>{N(!0);const e=new FormData;e.append("company_name",b),e.append("report_type",u),p&&e.append("company_logo",p);try{await n.A.post("".concat("http://172.16.0.108:8000","/v1/guacamole/update_report"),e,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(R)}});l.oR.success("File uploaded successfully")}catch(t){console.error("Error submitting form:",t),l.oR.error("Failed to upload file")}finally{N(!1)}},disabled:v,className:"flex items-center justify-center gap-2 rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm ml-7\n        ".concat(v?"cursor-not-allowed opacity-70":"hover:bg-indigo-500"," \n        focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"),children:v?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(c.A,{size:16,color:"inherit"}),"Submitting..."]}):"Submit"})})]}),(0,d.jsxs)("div",{className:"report_divsion report-preview bg-white p-6 rounded-lg shadow-lg border felx-1 w-1/2",children:[(0,d.jsx)("h2",{children:"PDF Template Preview"}),(0,d.jsxs)("table",{className:"report-table",children:[(0,d.jsxs)("thead",{children:[(0,d.jsxs)("tr",{children:[(0,d.jsxs)("th",{colSpan:3,className:"company_name",children:[(0,d.jsx)("span",{className:"text-black",children:"Company Name : "}),b||f.length>0&&f[0].company_name]}),(0,d.jsx)("th",{rowSpan:2,className:"image",children:p?(0,d.jsx)("img",{className:"img",src:"string"===typeof p?"data:image/png;base64,".concat(p):URL.createObjectURL(p),alt:"Company logo"}):(0,d.jsx)("img",{src:"data:image/png;base64,".concat(f.length>0?f[0].company_logo:""),alt:"Company logo"})})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"text-black",children:"Date Range"}),(0,d.jsx)("th",{className:"text-black",children:"Username"}),(0,d.jsxs)("th",{children:[(0,d.jsx)("span",{className:"text-black",children:"Report Type: "}),u||f.length>0&&f[0].report_type]})]})]}),(0,d.jsxs)("tbody",{children:[(0,d.jsx)("tr",{className:"data-row",children:(0,d.jsx)("td",{colSpan:4,children:(0,d.jsx)("i",{className:"text-gray-700 ",children:"Report data is displayed here"})})}),(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:4,children:(0,d.jsxs)("div",{className:"info-row-container",children:[(0,d.jsxs)("div",{className:"generated-by",children:[(0,d.jsx)("span",{className:"text-black",children:" Generated By: "}),(0,d.jsx)("span",{className:"bold",children:m})]}),(0,d.jsxs)("div",{className:"date",children:[(0,d.jsx)("span",{className:"text-black",children:"Date: "}),(0,d.jsx)("span",{className:"bold",children:a})]})]})})})]})]})]})]})}}}]);
//# sourceMappingURL=262.1c0c9dfe.chunk.js.map