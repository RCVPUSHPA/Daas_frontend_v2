"use strict";(self.webpackChunkdass=self.webpackChunkdass||[]).push([[767],{7767:(e,s,a)=>{a.r(s),a.d(s,{default:()=>u});var i=a(2483),l=a(3376),t=a(2189),n=(a(1049),a(5601)),r=a(7029),d=a(862),o=a(6499),c=a(4721),m=a(2696),g=a(4100),x=a(5543),h=a(6723);const u=e=>{const s=(0,l.Zp)();(0,l.zy)();let[a,u]=(0,i.useState)({}),[p,b]=(0,i.useState)((0,l.g)().id),[j,f]=(0,i.useState)(),[v,N]=(0,i.useState)(!0);const[y,w]=(0,i.useState)(!1),_=(0,i.useContext)(t._),C=_.token;let k=e.tokenParsed.preferred_username;(0,i.useEffect)((()=>{N(!0),c.A.get("".concat("http://172.16.0.108:8000","/v1/pool/").concat(p),{headers:{Authorization:"Bearer ".concat(C)}}).then((e=>{u(e.data.pool),f(e.data.pool.pool_name)})).catch((e=>{console.log(e)})).finally((()=>{N(!1)}))}),[p]);let S=[],[A,P]=(0,i.useState)("RDP");const D=e=>{const{name:s,type:a,checked:i,value:l}=e.target;u((e=>{let t;return t="checkbox"===a?i:["pool_guacd_port","pool_max_connections","pool_max_connections_per_user","pool_gateway_port","pool_width","pool_height","pool_dpi","pool_sftp_port","pool_sftp_server_alive_interval","pool_scrollback","pool_font_size","pool_destination_port","pool_port"].includes(s)?l?parseInt(l,10):null:l,{...e,[s]:t}}))};let T=["None","Any","NLA","RDP encryption","TLS encryption","Hyper-V / VMConnect"];return(0,h.jsxs)("div",{className:"edit-pool w-[95%] m-auto mb-5 min-h-[90vh] rounded-md bg-white",children:[(0,h.jsx)("div",{className:"flex justify-start mt-5",children:(0,h.jsx)("div",{onClick:()=>{s(-1)},className:"ml-4 bg-indigo-500 text-white px-4 py-2 rounded-md hover:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-10",children:(0,h.jsx)("i",{className:"fas fa-arrow-left"})})}),(0,h.jsxs)("div",{className:"pool-creation-form w-full bg-white",children:[v?(0,h.jsxs)("div",{className:"flex flex-col items-center justify-center bg-white m-10 loading_editpool",children:[(0,h.jsx)("img",{src:x,alt:"Loading...",className:"w-10 h-10 animate-spin"}),(0,h.jsx)("p",{className:"mt-4 text-lg text-gray-600",children:"Loading..."})]}):(0,h.jsxs)("div",{className:"space-y-5 m-2",children:[(0,h.jsxs)("div",{className:" p-3 rounded-md  bg-white w-full ",children:[(0,h.jsxs)("h2",{className:"font-semibold leading-7 text-gray-900",children:[(0,h.jsx)("span",{className:"text-gray-500 text-xl",children:"Edit "})," : ",(0,h.jsx)("span",{className:"text-indigo-600 text-xl",children:a.pool_name})]}),(0,h.jsxs)("div",{className:"text-left table-auto ml-5",children:[(0,h.jsxs)("div",{className:"tr",children:[(0,h.jsx)("div",{className:"th",children:(0,h.jsx)("label",{className:"block text-sm font-medium leading-6 text-gray-900  border-0",children:"Pool Type"})}),(0,h.jsx)("div",{className:"td",children:(0,h.jsx)("div",{className:"mt-2 border-0 ",children:(0,h.jsxs)("select",{onChange:D,value:a.pool_type,name:"pool_type",disabled:!0,className:" w-full cursor-pointer rounded-md py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6 border-2",children:[(0,h.jsx)("option",{selected:!0,value:"",disabled:!0,children:"Pool Type"}),["Automated","Manual"].map((e=>(0,h.jsx)("option",{value:e,className:"capitalize px-1",children:e},e)))]})})})]}),a.pool_type&&(0,h.jsxs)("div",{className:"tr",children:[(0,h.jsx)("div",{className:"th",children:(0,h.jsx)("label",{className:"block text-sm font-medium leading-6 text-gray-900 border-0",children:"Pool Name"})}),(0,h.jsx)("div",{className:"td",children:(0,h.jsx)("div",{className:"mt-2  border-0",children:(0,h.jsx)("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md",children:(0,h.jsx)("input",{type:"text",name:"pool_name",onChange:D,value:a.pool_name,className:"block flex-1 rounded-md bg-white bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6 border-2"})})})})]}),"Automated"==a.pool_type&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"text-red-500",children:"Automated pools will be available in the upcoming beta version."}),(0,h.jsxs)("div",{className:"tr",children:[(0,h.jsx)("div",{className:"th",children:(0,h.jsx)("label",{className:"block text-sm font-medium leading-6 text-gray-900  border-0",children:"Template"})}),(0,h.jsx)("div",{className:"td",children:(0,h.jsx)("div",{className:"mt-2 border-0 ",children:(0,h.jsxs)("select",{onChange:D,value:a.dataTemplate,name:"dataTemplate",className:" w-full cursor-pointer rounded-md py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6 border-2",children:[(0,h.jsx)("option",{selected:!0,value:"",disabled:!0,children:"Choose Template"}),S.map((e=>(0,h.jsx)("option",{value:e,className:"capitalize px-1",children:e},e)))]})})})]}),(0,h.jsxs)("div",{className:"tr",children:[(0,h.jsx)("div",{className:"th",children:(0,h.jsx)("label",{className:"block text-sm font-medium leading-6 text-gray-900 border-0 ",children:"CPU"})}),(0,h.jsx)("div",{className:"td",children:(0,h.jsx)("div",{className:"mt-2  border-0",children:(0,h.jsx)("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md",children:(0,h.jsx)("input",{onChange:D,value:a.cpu,type:"number",name:"cpu",className:"block flex-1 rounded-md bg-white bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6 border-2"})})})})]}),(0,h.jsxs)("div",{className:"tr",children:[(0,h.jsx)("div",{className:"th",children:(0,h.jsx)("label",{className:"block text-sm font-medium leading-6 text-gray-900 border-0",children:"RAM"})}),(0,h.jsx)("div",{className:"td",children:(0,h.jsx)("div",{className:"mt-2  border-0",children:(0,h.jsx)("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md",children:(0,h.jsx)("input",{type:"text",name:"ram",onChange:D,value:a.ram,className:"block flex-1 rounded-md bg-white bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6 border-2"})})})})]}),(0,h.jsxs)("div",{className:"tr",children:[(0,h.jsx)("div",{className:"th",children:(0,h.jsx)("label",{className:"block text-sm font-medium leading-6 text-gray-900 border-0",children:"Naming Pattern"})}),(0,h.jsx)("div",{className:"td",children:(0,h.jsx)("div",{className:"mt-2  border-0",children:(0,h.jsx)("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md",children:(0,h.jsx)("input",{type:"text",name:"naming_pattern",onChange:D,value:a.naming_pattern,disabled:!0,className:"block flex-1 rounded-md bg-white bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6 border-2"})})})})]}),(0,h.jsxs)("div",{className:"tr",children:[(0,h.jsx)("div",{className:"th",children:(0,h.jsx)("label",{className:"block text-sm font-medium leading-6 text-gray-900 border-0 ",children:"Number of Machines"})}),(0,h.jsx)("div",{className:"td",children:(0,h.jsx)("div",{className:"mt-2  border-0",children:(0,h.jsx)("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md",children:(0,h.jsx)("input",{onChange:D,value:a.number_of_machines,type:"number",name:"number_of_machines",className:"block flex-1 rounded-md bg-white bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6 border-2"})})})})]}),(0,h.jsxs)("div",{className:"tr",children:[(0,h.jsx)("div",{className:"th",children:(0,h.jsx)("label",{className:"block text-sm font-medium leading-6 text-gray-900  border-0",children:"Domain"})}),(0,h.jsx)("div",{className:"td",children:(0,h.jsx)("div",{className:"mt-2 border-0 ",children:(0,h.jsxs)("select",{onChange:D,value:a.domain,name:"domain",disabled:!0,className:" w-full cursor-pointer rounded-md py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6 border-2",children:[(0,h.jsx)("option",{selected:!0,value:"",disabled:!0,children:"Domain"}),S.map((e=>(0,h.jsx)("option",{value:e,className:"capitalize px-1",children:e},e)))]})})})]}),(0,h.jsxs)("div",{className:"tr",children:[(0,h.jsx)("div",{className:"th",children:(0,h.jsx)("label",{className:"block text-sm font-medium leading-6 text-gray-900 border-0",children:"OU"})}),(0,h.jsx)("div",{className:"td",children:(0,h.jsx)("div",{className:"mt-2  border-0",children:(0,h.jsx)("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md",children:(0,h.jsx)("input",{type:"text",name:"ou",onChange:D,value:a.ou,disabled:!0,className:"block flex-1 rounded-md bg-white bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6 border-2"})})})})]}),(0,h.jsxs)("div",{className:"tr",children:[(0,h.jsx)("div",{className:"th",children:(0,h.jsx)("label",{className:"block text-sm font-medium leading-6 text-gray-900  border-0",children:"Cluster"})}),(0,h.jsx)("div",{className:"td",children:(0,h.jsx)("div",{className:"mt-2 border-0 ",children:(0,h.jsxs)("select",{onChange:D,value:a.cluster.name,name:"cluster",disabled:!0,className:" w-full cursor-pointer rounded-md py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6 border-2",children:[(0,h.jsx)("option",{selected:!0,value:"",disabled:!0,children:"Cluster"}),_.availableClusters.map((e=>(0,h.jsx)("option",{value:e.name,className:"capitalize px-1",children:e.name},e)))]})})})]}),"VMware"==a.cluster.type&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"tr",children:[(0,h.jsx)("div",{className:"th",children:(0,h.jsx)("label",{className:"block text-sm font-medium leading-6 text-gray-900  border-0",children:"Select DC"})}),(0,h.jsx)("div",{className:"td",children:(0,h.jsx)("div",{className:"mt-2 border-0 ",children:(0,h.jsxs)("select",{onChange:D,value:a.DC,name:"DC",disabled:!0,className:" w-full cursor-pointer rounded-md py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6 border-2",children:[(0,h.jsx)("option",{selected:!0,value:"",disabled:!0,children:"Select DC"}),_.availableClusters.map((e=>(0,h.jsx)("option",{value:e._id,className:"capitalize px-1",children:e.name},e)))]})})})]}),(0,h.jsxs)("div",{className:"tr",children:[(0,h.jsx)("div",{className:"th",children:(0,h.jsx)("label",{className:"block text-sm font-medium leading-6 text-gray-900  border-0",children:"Select Folder"})}),(0,h.jsx)("div",{className:"td",children:(0,h.jsx)("div",{className:"mt-2 border-0 ",children:(0,h.jsxs)("select",{onChange:D,value:a.Folder,name:"Folder",className:" w-full cursor-pointer rounded-md py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6 border-2",children:[(0,h.jsx)("option",{selected:!0,value:"",disabled:!0,children:"Select Folder"}),_.availableClusters.map((e=>(0,h.jsx)("option",{value:e._id,className:"capitalize px-1",children:e.name},e)))]})})})]})]})]})]})]}),(0,h.jsxs)("div",{className:"w-full rounded-md bg-white",children:[(0,h.jsx)(o.A,{tablist:["RDP","SSH","VNC"].filter((e=>e===a.pool_protocol)),selectedTab:A,setSelectedTab:P,handleTabSelection:e=>{P(e),console.log(e)}}),"RDP"==A&&"RDP"===a.pool_protocol&&(0,h.jsx)(d.A,{onChange:D,poolDetails:a,securityMode:T}),"SSH"===a.pool_protocol&&(0,h.jsx)(r.A,{onChange:D,poolDetails:a,securityMode:T}),"VNC"===a.pool_protocol&&(0,h.jsx)(n.A,{onChange:D,poolDetails:a,securityMode:T})]})]}),(0,h.jsx)("div",{className:"mb-5 pl-5 flex items-start justify-start",children:(0,h.jsxs)("button",{onClick:()=>{w(!0);const e={...a,email:k};c.A.put("".concat("http://172.16.0.108:8000","/v1/update_pool/").concat(a.id),e,{headers:{Authorization:"Bearer ".concat(C),"Content-Type":"application/json"}}).then((e=>{e.data.pool&&u(e.data.pool),g.oR.success(e.data.msg,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light",transition:g.q7}),s("/pools"),_.getPools()})).catch((e=>{console.log(e),g.oR.error("Pool modification failed",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light",transition:g.q7})})).finally((()=>{w(!1)}))},type:"submit",disabled:y,className:"rounded-md mb-4 px-3 py-2 text-sm font-semibold text-white shadow-sm flex items-center gap-2\n              ".concat(y?"bg-indigo-400 cursor-not-allowed":"bg-indigo-500 hover:bg-indigo-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600","\n            "),children:[y&&(0,h.jsx)(m.A,{className:"h-4 w-4 animate-spin"}),(0,h.jsx)("span",{children:y?"Updating...":"Update"})]})})]})]})}}}]);
//# sourceMappingURL=767.86ebc5f8.chunk.js.map