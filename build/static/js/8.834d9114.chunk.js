"use strict";(self.webpackChunkdass=self.webpackChunkdass||[]).push([[8],{8923:()=>{},6008:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var a=s(2483),n=(s(8923),s(4721)),r=s(4686),c=s.n(r),o=(s(614),s(2997)),l=s(2189),i=s(3137),d=s(2342),h=s(6723);const{RangePicker:m}=d.A,x=e=>{if(e<60)return"".concat(Math.floor(e)," seconds");if(e<3600){const t=Math.floor(e/60);return" ".concat(t," minutes ").concat(Math.floor(e%60)," seconds")}if(e<86400){const t=Math.floor(e/3600),s=Math.floor(e%3600/60);return"".concat(t," hours ").concat(s," minutes ").concat(Math.floor(e%60)," seconds")}if(e>=86400){const t=Math.floor(e/86400),s=Math.floor(e%86400/3600);return"".concat(t," days ").concat(s," hours ").concat(Math.floor(e%3600/60)," minutes ").concat(Math.floor(e%60)," seconds")}return"NA"},p=e=>{if("Not Applicable"===e)return"Not Applicable";{const t=new Date(e),s=t.getDate().toString().padStart(2,"0"),a=(t.getMonth()+1).toString().padStart(2,"0"),n=t.getFullYear().toString(),r=t.getHours().toString().padStart(2,"0"),c=t.getMinutes().toString().padStart(2,"0"),o=t.getSeconds().toString().padStart(2,"0");return"".concat(s,"/").concat(a,"/").concat(n," ").concat(r,":").concat(c,":").concat(o)}},j=e=>{if(!e||"Not Applicable"===e)return"Not Applicable";const t=Math.floor(e/3600),s=Math.floor(e%3600/60),a=Math.round(e%60);return"".concat(t," hours ").concat(s," minutes ").concat(a," seconds")},u=e=>{const[t,s]=(0,a.useState)([]),[r,d]=(0,a.useState)("All Users"),[u,g]=(0,a.useState)({start:"",end:""}),[y,N]=(0,a.useState)({startDate:null,endDate:null}),[S,b]=(0,a.useState)([]),[_,f]=(0,a.useState)([]),[v,D]=(0,a.useState)(!1),[R,M]=(0,a.useState)(!1),[w,A]=(0,a.useState)(!1),[C,L]=(0,a.useState)(!1),[U,Y]=(0,a.useState)({company_name:"",company_logo:""}),[k,H]=(0,a.useState)([]),[T,B]=(0,a.useState)(!1),[E,z]=a.useState(""),P=(0,a.useContext)(l._),G=(0,a.useRef)(),F=P.token;let V=e.tokenParsed.name;const O=(new Date).toLocaleString(),q=(0,o.useReactToPrint)({content:()=>G.current});(0,a.useEffect)((()=>{const{start:e,end:t}=u;e&&t&&(A(!0),n.A.get("".concat("http://172.16.0.108:8000","/v1/guacamole/vamanit_allusers/").concat(e,"/").concat(t),{headers:{Authorization:"Bearer ".concat(F)}}).then((e=>{s(e.data)})).catch((e=>{console.error("Error fetching users:",e)})).finally((()=>{A(!1)})))}),[u]);const I=e=>{n.A.get("".concat("http://172.16.0.108:8000","/v1/guacamole/reports/").concat(e),{headers:{Authorization:"Bearer ".concat(F)}}).then((t=>{const s=t.data.find((t=>t.report_type===e));s&&Y({company_name:s.company_name,company_logo:s.company_logo})})).catch((e=>{console.error("Error fetching company details:",e)}))};return(0,h.jsx)("div",{children:(0,h.jsxs)("div",{className:"Report_page",children:[(0,h.jsxs)("div",{className:"Reports_name",children:[(0,h.jsx)("h1",{children:"Reports"}),(0,h.jsx)("div",{className:"reports_title",children:(0,h.jsx)("button",{className:"report_type",type:"button",children:"Vamanit Daas Reports"})})]}),(0,h.jsxs)("form",{className:"report-form",onSubmit:e=>{e.preventDefault()},children:[(0,h.jsxs)("div",{className:"form_main_container",children:[(0,h.jsxs)("div",{className:"form_sub_container",children:[(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Date Range : "}),(0,h.jsx)(m,{onChange:e=>{e&&2===e.length?g({start:e[0].format("YYYY-MM-DD HH:mm:ss.SSSSSS"),end:e[1].format("YYYY-MM-DD HH:mm:ss.SSSSSS")}):(g({start:"",end:""}),b([]),f([]),s([]),D(!1),M(!1),B(!1))},showTime:{hideDisabledOptions:!0,defaultValue:[c()("00:00:00","HH:mm:ss"),c()("23:59:59","HH:mm:ss")]},format:"YYYY-MM-DD HH:mm:ss"})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{htmlFor:"user",children:"Select User : "}),(0,h.jsxs)("select",{id:"user",value:r,onChange:e=>d(e.target.value),children:[(0,h.jsx)("option",{value:"All Users",children:"All Users"}),t.map(((e,t)=>(0,h.jsx)("option",{value:e,children:e},t)))]}),w&&(0,h.jsx)(i.ul,{visible:!0,height:"50",width:"50",ariaLabel:"color-ring-loading",wrapperStyle:{},wrapperClass:"color-ring-wrapper",colors:["#3725dddc","#3725dddc","#3725dddc","#3725dddc","#3725dddc"]})]})]}),(0,h.jsxs)("div",{className:"tab_container",children:[(0,h.jsxs)("div",{className:"tab_header",children:[(0,h.jsxs)("div",{className:"tab_buttons_group",children:[(0,h.jsx)("button",{className:"tab_button ".concat("session"===E?"active":""),type:"button",onClick:()=>{z("session"),(()=>{const{start:e,end:t}=u;if(!e||!t)return void console.error("Start date or end date is missing!");A(!0),I("Session Reports");let s="".concat("http://172.16.0.108:8000","/v1/guacamole/vamanit_session_reports/").concat(e,"/").concat(t);"All Users"!==r&&(s+="/".concat(r)),n.A.get(s,{headers:{Authorization:"Bearer ".concat(F)}}).then((e=>{b(e.data),L(!0),D(!0),M(!1),B(!1)})).catch((e=>{console.error("Error fetching session reports:",e)})).finally((()=>{A(!1)}))})()},children:"Session Reports"}),(0,h.jsx)("button",{className:"tab_button ".concat("day"===E?"active":""),type:"button",onClick:()=>{z("day"),(()=>{const{start:e,end:t}=u;if(!e||!t)return void console.error("Start date or end date is missing!");A(!0),I("Daily Reports");let s="".concat("http://172.16.0.108:8000","/v1/guacamole/day_reports/").concat(e,"/").concat(t);"All Users"!==r&&(s+="/".concat(r)),n.A.get(s,{headers:{Authorization:"Bearer ".concat(F)}}).then((e=>{f(e.data),L(!0),D(!1),M(!0),B(!1)})).catch((e=>{console.error("Error fetching day reports:",e)})).finally((()=>{A(!1)}))})()},children:"Day Reports"}),(0,h.jsx)("button",{className:"tab_button ".concat("consolidate"===E?"active":""),type:"button",onClick:()=>{z("consolidate"),(()=>{const{start:e,end:t}=u;if(!e||!t)return void console.error("Start date or end date is missing!");A(!0),I("Consolidate Reports");let s="".concat("http://172.16.0.108:8000","/v1/guacamole/total_durations_within_range/").concat(e,"/").concat(t);"All Users"!==r&&(s+="/".concat(r)),n.A.get(s,{headers:{Authorization:"Bearer ".concat(F)}}).then((e=>{H(e.data),L(!0),D(!1),M(!1),B(!0)})).catch((e=>{console.error("Error fetching day reports:",e)})).finally((()=>{A(!1)}))})()},children:"Consolidate Reports"})]}),C&&(0,h.jsx)("button",{className:"button",type:"button",onClick:q,children:"Print"})]}),""===u.start&&""==u.end&&(0,h.jsx)("div",{className:"text-gray-500 mt-20 ",children:"Please select Date Range"})]})]}),(0,h.jsxs)("div",{ref:G,children:[v&&S.length>0&&(0,h.jsxs)("div",{className:"Report_container fixed-header",children:[(0,h.jsx)("table",{children:(0,h.jsxs)("thead",{className:"report_thead",children:[(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{colSpan:3,className:"company_name",children:(0,h.jsx)("h2",{children:U.company_name})}),(0,h.jsx)("th",{rowSpan:2,className:"company_logo",children:(0,h.jsx)("img",{src:"data:image/png;base64,".concat(U.company_logo),alt:"Company Logo",className:"company-logo"})})]}),(0,h.jsxs)("tr",{children:[(0,h.jsxs)("th",{children:["Date Range:"," ",(0,h.jsxs)("span",{children:[new Date(u.start).toLocaleString()," -"," ",new Date(u.end).toLocaleString()]})]}),(0,h.jsxs)("th",{children:["User Name :",(0,h.jsx)("span",{children:r})]}),(0,h.jsxs)("th",{children:["Report Type : ",(0,h.jsx)("span",{children:"Session Reports"})]})]})]})}),(0,h.jsxs)("table",{children:[(0,h.jsx)("thead",{className:"report_reports",children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{children:"Username"}),(0,h.jsx)("th",{children:"Login Time"}),(0,h.jsx)("th",{children:"Logout Time"}),(0,h.jsx)("th",{children:"Machine Name"}),(0,h.jsx)("th",{children:"Session Duration"})]})}),(0,h.jsx)("tbody",{className:"report_tbody",children:S.map(((e,t)=>(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:e.username}),(0,h.jsx)("td",{children:p(e.loginTime)}),(0,h.jsx)("td",{children:p(e.logoutTime)}),(0,h.jsx)("td",{children:e.machineName}),(0,h.jsx)("td",{children:x(e.sessionDuration)})]},t)))})]}),(0,h.jsx)("table",{children:(0,h.jsx)("tr",{children:(0,h.jsx)("td",{children:(0,h.jsxs)("div",{className:"info-row-container",children:[(0,h.jsxs)("div",{className:"generated-by",children:["Generated By:"," ",(0,h.jsx)("span",{className:"bold",children:V})]}),(0,h.jsxs)("div",{className:"date",children:["Date: ",(0,h.jsx)("span",{className:"bold",children:O})]})]})})})})]}),R&&_.length>0&&(0,h.jsxs)("div",{className:"Report_container",children:[(0,h.jsx)("table",{children:(0,h.jsxs)("thead",{className:"report_thead",children:[(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{colSpan:3,className:"company_name",children:(0,h.jsx)("h2",{children:U.company_name})}),(0,h.jsx)("th",{rowSpan:2,className:"company_logo",children:(0,h.jsx)("img",{src:"data:image/png;base64,".concat(U.company_logo),alt:"Company Logo",className:"company-logo"})})]}),(0,h.jsxs)("tr",{children:[(0,h.jsxs)("th",{children:["Date Range:"," ",(0,h.jsxs)("span",{children:[new Date(u.start).toLocaleString()," -"," ",new Date(u.end).toLocaleString()]})]}),(0,h.jsxs)("th",{children:["User Name :",(0,h.jsx)("span",{children:r})]}),(0,h.jsxs)("th",{children:["Report Type : ",(0,h.jsx)("span",{children:"Daily Reports"})]})]})]})}),(0,h.jsxs)("table",{children:[(0,h.jsx)("thead",{className:"report_reports",children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{children:"Username"}),(0,h.jsx)("th",{children:"Machine Name"}),(0,h.jsx)("th",{children:"Date"}),(0,h.jsx)("th",{children:"Day Session Count"}),(0,h.jsx)("th",{children:"Daily Duration"})]})}),(0,h.jsx)("tbody",{className:"report_tbody",children:_.map(((e,t)=>(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:e.username}),(0,h.jsx)("td",{children:e.machine_name}),(0,h.jsx)("td",{children:e.date}),(0,h.jsx)("td",{children:e.day_session_count}),(0,h.jsx)("td",{children:x(e.daily_duration)})]},t)))})]}),(0,h.jsx)("table",{children:(0,h.jsx)("tr",{children:(0,h.jsx)("td",{children:(0,h.jsxs)("div",{className:"info-row-container",children:[(0,h.jsxs)("div",{className:"generated-by",children:["Generated By:"," ",(0,h.jsx)("span",{className:"bold",children:V})]}),(0,h.jsxs)("div",{className:"date",children:["Date: ",(0,h.jsx)("span",{className:"bold",children:O})]})]})})})})]}),T&&k.length>0&&(0,h.jsxs)("div",{className:"Report_container",children:[(0,h.jsx)("table",{children:(0,h.jsxs)("thead",{className:"report_thead",children:[(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{colSpan:3,className:"company_name",children:(0,h.jsxs)("h3",{style:{color:"black"},children:["Company Name :"," ",(0,h.jsxs)("span",{style:{color:"gray"},children:[" ",U.company_name]})," "]})}),(0,h.jsx)("th",{rowSpan:2,className:"company_logo",children:(0,h.jsx)("img",{src:"data:image/png;base64,".concat(U.company_logo),alt:"Company Logo",className:"company-logo"})})]}),(0,h.jsxs)("tr",{children:[(0,h.jsxs)("th",{children:["Date Range:"," ",(0,h.jsxs)("span",{children:[new Date(u.start).toLocaleString()," -"," ",new Date(u.end).toLocaleString()]})]}),(0,h.jsxs)("th",{children:["User Name :",(0,h.jsx)("span",{children:r})]}),(0,h.jsxs)("th",{children:["Report Type : ",(0,h.jsx)("span",{children:"Consolidate Reports"})]})]})]})}),(0,h.jsxs)("table",{children:[(0,h.jsx)("thead",{className:"report_reports",children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{children:"Username"}),(0,h.jsx)("th",{children:"Machine Name"}),(0,h.jsx)("th",{children:"Session Count"}),(0,h.jsx)("th",{children:"Total Duration"})]})}),(0,h.jsx)("tbody",{className:"report_tbody",children:k.map(((e,t)=>(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:e.username}),(0,h.jsx)("td",{children:e.machine_name}),(0,h.jsx)("td",{children:e.day_session_count}),(0,h.jsx)("td",{children:j(e.total_duration)})]},t)))})]}),(0,h.jsx)("table",{children:(0,h.jsx)("tr",{children:(0,h.jsx)("td",{children:(0,h.jsxs)("div",{className:"info-row-container",children:[(0,h.jsxs)("div",{className:"generated-by",children:["Generated By: ",(0,h.jsx)("span",{className:"bold",children:"user"})]}),(0,h.jsxs)("div",{className:"date",children:["Date: ",(0,h.jsx)("span",{className:"bold",children:O})]})]})})})})]})]})]})]})})}}}]);
//# sourceMappingURL=8.834d9114.chunk.js.map